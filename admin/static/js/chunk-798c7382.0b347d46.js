(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-798c7382"],{2593:function(t,e,o){"use strict";o("a12b")},"32e1":function(t,e,o){var n=o("201c"),i=o("e6e5"),r=o("07f5"),a=o("8163"),s=o("beec"),c=o("9882"),l=o("95b4"),u=o("06be"),d=o("9beb"),f=i("Reflect","construct"),h=Object.prototype,m=[].push,g=d((function(){function t(){}return!(f((function(){}),[],t)instanceof t)})),p=!d((function(){f((function(){}))})),b=g||p;n({target:"Reflect",stat:!0,forced:b,sham:b},{construct:function(t,e){s(t),c(e);var o=arguments.length<3?t:s(arguments[2]);if(p&&!g)return f(t,e,o);if(t==o){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return r(m,n,e),new(r(a,t,n))}var i=o.prototype,d=u(l(i)?i:h),b=r(t,d,e);return l(b)?b:d}})},"41e1":function(t,e,o){"use strict";o.d(e,"a",(function(){return i}));o("e5a1"),o("4e38"),o("8161");function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}},6071:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var n=o("8a91");function i(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Object(n["a"])(i.key),i)}}function r(t,e,o){return e&&i(t.prototype,e),o&&i(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}},"6fe2":function(t,e,o){"use strict";o.d(e,"a",(function(){return c}));o("32e1"),o("ad6c"),o("bd8c"),o("4e38"),o("97e4"),o("8161");function n(t){return n=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n(t)}function i(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}o("e5a1");var r=o("92144");function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){if(e&&("object"===Object(r["a"])(e)||"function"===typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return a(t)}function c(t){var e=i();return function(){var o,i=n(t);if(e){var r=n(this).constructor;o=Reflect.construct(i,arguments,r)}else o=i.apply(this,arguments);return s(this,o)}}},"6fe6":function(t,e,o){},8163:function(t,e,o){"use strict";var n=o("ce04"),i=o("c695"),r=o("95b4"),a=o("1449"),s=o("48cb"),c=o("ac57"),l=Function,u=n([].concat),d=n([].join),f={},h=function(t,e,o){if(!a(f,e)){for(var n=[],i=0;i<e;i++)n[i]="a["+i+"]";f[e]=l("C,a","return new C("+d(n,",")+")")}return f[e](t,o)};t.exports=c?l.bind:function(t){var e=i(this),o=e.prototype,n=s(arguments,1),a=function(){var o=u(n,s(arguments));return this instanceof a?h(e,o.length,o):e.apply(t,o)};return r(o)&&(a.prototype=o),a}},"9bd2":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("h3",[t._v("文字编辑-可以公式编辑")]),e("el-button",{attrs:{type:""},on:{click:t.see}},[t._v("查看xml结构")]),e("el-button",{attrs:{type:""},on:{click:t.onGetVal}},[t._v("保存并且关闭")]),e("el-button",{attrs:{type:""},on:{click:t.onClose}},[t._v("关闭")]),e("div",{ref:"wangEditor",staticClass:"wangEditorDiv",attrs:{id:"demo1"}}),e("h3",[t._v("内容预览")]),e("el-button",{attrs:{type:""},on:{click:t.setEditorData}},[t._v("setEditorData")]),e("el-dialog",{attrs:{"append-to-body":!0,"close-on-click-modal":!1,center:"",visible:t.outVisible,"before-close":t.outClose,width:"90%"},on:{open:function(e){return t.openCodeMirrorPopUp()},"update:visible":function(e){t.outVisible=e}}},[e("CodeMirrorPopUp",{ref:"CodeMirrorPopUp",attrs:{editorDataHtml:t.editorData,editorDataConf:t.editorDataConf},on:{updateData:t.updateData,saveMirrorToWang:t.saveMirrorToWang}})],1)],1)},i=[],r=o("56c3"),a=o("bdb5"),s=o("6071"),c=o("41e1"),l=o("6fe2"),u=(o("c676"),o("c619"),o("6c9d")),d=o.n(u),f=o("2aaa"),h=o("f84a"),m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("h3",[t._v("内容预览")]),e("el-button",{attrs:{type:""},on:{click:t.saveMirrorToWang}},[t._v("saveMirrorToWang")]),e("el-button",{on:{click:t.setData}},[t._v("setData")]),e("el-button",{on:{click:t.autoFormatRange}},[t._v("autoFormatRange")]),e("el-button",{on:{click:t.autoFormatRangeAll}},[t._v("autoFormatRangeAll")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editorData,expression:"editorData"}],domProps:{value:t.editorData},on:{input:function(e){e.target.composing||(t.editorData=e.target.value)}}}),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.editorData,expression:"editorData"}],ref:"mycode",staticClass:"codesql",staticStyle:{height:"200px",width:"600px"},domProps:{value:t.editorData},on:{onclick:t.codemirrorOnClick,click:t.codemirrorOnClick,changes:t.changes,input:function(e){e.target.composing||(t.editorData=e.target.value)}}})],1)},g=[],p=o("1e56"),b=(o("9bb8"),o("ef01"),o("5336"),o("8fb6"),o("ecb1"),o("63de"),o("f2df"),o("4360")),v=(o("23ce"),o("53e6"),o("2fb0"),o("632c"),o("347c"),o("9369"),o("abc4"),o("7736")),D=(o("e05e"),o("b7c4"),o("6259"));o("53e6"),o("9369"),o("23ce"),o("2fb0"),o("632c");var y={data:function(){var t;return t={editor:null,code:"//按Ctrl键进行代码提示",editorDataConfRef:{},outVisible:!1},Object(p["a"])(t,"editor",null),Object(p["a"])(t,"editorData","1111"),Object(p["a"])(t,"editorText",null),Object(p["a"])(t,"textarea",""),Object(p["a"])(t,"curCode","#include<int></int>"),Object(p["a"])(t,"cmOptions",{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!0,mode:"text/x-mysql",extraKeys:{Ctrl:"autocomplete"},lineWrapping:!0,theme:"solarized light"}),t},components:{},updated:function(){},mounted:function(){console.log("this.editorData"),console.log(this.editorData),this.editorData=this.editorDataHtml,this.mountedCodeMirrorXml()},props:{editorDataHtml:null,editorDataConf:{data:null}},methods:{autoFormatRangeAll:function(){this.editor.autoFormatRangeAll()},setData:function(){this.editorData="3123131"},formatSelection:function(){D.commands.indentAuto(this.editor)},format:function(){this.editor.autoFormatRange({line:0,ch:0},{line:this.editor.lineCount()})},refresh:function(){this.editor.refresh()},autoFormatRange:function(){this.editor.autoFormatRange({line:0,ch:0},{line:this.editor.lineCount()})},updateData:function(t){this.editorData=t,this.editor.setValue(t)},saveMirrorToWang:function(){console.log("editorData"),console.log(this.editorData);var t=this.editor.getValue();this.$emit("saveMirrorToWang",t)},see:function(){this.outVisible=!this.outVisible},onCmFocus:function(t){console.log("the editor is focused!",t),console.log("this.editor .config.focus"),console.log(this.editor.config.focus),this.editor.config.focus=!1,console.log("this.editor .config.focus"),console.log(this.editor.config.focus),console.log("document.activeElement"),console.log(document.activeElement),this.$nextTick((function(){t.refresh()}))},seeCode:function(){console.log("this.editorData"),console.log(this.editorData),b["a"].dispatch("app/setWangEdiorFormulaData",this.editorData),this.$router.push("/test/CodeMirrorTest")},outClose:function(){console.log("outClose"),this.outVisible=!1},getWangEdiorFormulaDataFromStore:function(){return console.log("this.$store.state"),console.log(this.$store.state),this.$store.state.app.WangEdiorFormulaData},codemirrorOnClick:function(t){},onGetVal:function(){this.$emit("getVal",this.editorData)},onSetVal:function(t){console.log("val"),console.log(t),this.editor.txt.html(t)},onClose:function(){this.$emit("close",this.editorData)},changes:function(t,e){},onCmCodeChanges:function(t,e){this.editorValue=t.getValue(),this.resetLint()},mountedCodemirrorCodeRef:function(){console.log("this. editorDataConf.data mounted"),console.log(this.editorDataConf.data),this.editorDataConfRef=this.editorDataConf,this.editorData=this.editorDataConfRef.data;var t=this.$refs.codemirrorCode.codemirror;console.log("codemirrorCodeRef"),console.log(t),t.on("cursorActivity",(function(){t.showHint()}))},mountedCodeMirrorXml:function(){var t,e="application/xml",o=this,n=D.fromTextArea(this.$refs.mycode,{mode:e,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,styleActiveLine:!0,theme:"monokai",hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}},extraKeys:{"'<'":"completeAfter","'/'":"completeIfAfterLt","' '":"completeIfInTag","'='":"completeIfInTag",Ctrl:"autocomplete","Shift-Tab":function(){console.log("选中部分格式化"),o.formatSelection()},"Shift-Alt":function(){o.format()}}}),i={"!attrs":{id:null,class:["A","B","C"]},Button:{attrs:{x:null,y:null,w:null,h:null,align:["center","left","right"],alignV:["center","top","bottom"],Visibility:null}}};D.commands.completeAfter=function(t,e){return e&&!e()||setTimeout((function(){t.state.completionActive||t.showHint({completeSingle:!1})}),100),D.Pass},D.commands.completeIfAfterLt=function(t){return D.commands.completeAfter(t,(function(){var e=t.getCursor();console.log("cur"),console.log(e);var o="<"==t.getRange(D.Pos(e.line,e.ch-1),e);return console.log("res"),console.log(o),o}))},D.commands.completeIfInTag=function(t){return D.commands.completeAfter(t,(function(){var e=t.getTokenAt(t.getCursor()),o=/[""]/;if("string"==e.type&&(!o.test(e.string.charAt(e.string.length-1))||1==e.string.length))return!1;var n=D.innerMode(t.getMode(),e.state).state;return n.tagName}))},D.defineExtension("autoFormatRange",(function(t,e){var o=this,n=o.getMode(),i=o.getRange(t,e).split("\n"),r=D.copyState(n,o.getTokenAt(t).state),a=o.getOption("tabSize"),s="",c=0,l=0==t.ch;function u(){s+="\n",l=!0,++c}for(var d=0;d<i.length;++d){var f=new D.StringStream(i[d],a);while(!f.eol()){var h=D.innerMode(n,r),m=n.token(f,r),g=f.current();f.start=f.pos,l&&!/\S/.test(g)||(s+=g,l=!1),!l&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(m,g,f.string.slice(f.pos)||i[d+1]||"",h.state)&&u()}!f.pos&&n.blankLine&&n.blankLine(r),l||u()}o.operation((function(){o.replaceRange(s,t,e);for(var n=t.line+1,i=t.line+c;n<=i;++n)o.indentLine(n,"smart")}))})),D.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e){return/^[;{}]$/.test(e)}}),D.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(t,e,o,n){return this.jsonMode?/^[\[,{]$/.test(e)||/^}/.test(o):(";"!=e||!n.lexical||")"!=n.lexical.type)&&(/^[;{}]$/.test(e)&&!/^;/.test(o))}}),D.extendMode("xml",{commentStart:"\x3c!--",commentEnd:"--\x3e",newlineAfterToken:function(t,e,o){return"tag"==t&&/>$/.test(e)||/^</.test(o)}}),D.defineExtension("commentRange",(function(t,e,o){var n=this,i=D.innerMode(n.getMode(),n.getTokenAt(e).state).mode;n.operation((function(){if(t)n.replaceRange(i.commentEnd,o),n.replaceRange(i.commentStart,e),e.line==o.line&&e.ch==o.ch&&n.setCursor(e.line,e.ch+i.commentStart.length);else{var r=n.getRange(e,o),a=r.indexOf(i.commentStart),s=r.lastIndexOf(i.commentEnd);a>-1&&s>-1&&s>a&&(r=r.substr(0,a)+r.substring(a+i.commentStart.length,s)+r.substr(s+i.commentEnd.length)),n.replaceRange(r,e,o)}}))})),D.defineExtension("autoIndentRange",(function(t,e){var o=this;this.operation((function(){for(var n=t.line;n<=e.line;n++)o.indentLine(n,"smart")}))})),D.defineExtension("autoFormatRange",(function(t,e){var o=this,n=o.getMode(),i=o.getRange(t,e).split("\n"),r=D.copyState(n,o.getTokenAt(t).state),a=o.getOption("tabSize"),s="",c=0,l=0==t.ch;function u(){s+="\n",l=!0,++c}for(var d=0;d<i.length;++d){var f=new D.StringStream(i[d],a);while(!f.eol()){var h=D.innerMode(n,r),m=n.token(f,r),g=f.current();f.start=f.pos,l&&!/\S/.test(g)||(s+=g,l=!1),!l&&h.mode.newlineAfterToken&&h.mode.newlineAfterToken(m,g,f.string.slice(f.pos)||i[d+1]||"",h.state)&&u()}!f.pos&&n.blankLine&&n.blankLine(r),l||u()}o.operation((function(){o.replaceRange(s,t,e);for(var n=t.line+1,i=t.line+c;n<=i;++n)o.indentLine(n,"smart");o.setSelection(t,o.getCursor(!1))}))})),D.defineExtension("autoFormatRangeAll",(function(){var t=this,e=n,o={line:e.firstLine(),ch:0,sticky:null},i={line:e.lastLine(),ch:e.getLine(e.lastLine()).length,sticky:null},r=t.getMode(),a=t.getRange(o,i).split("\n"),s=D.copyState(r,t.getTokenAt(o).state),c=t.getOption("tabSize");console.log("text"),console.log(a);var l="",u=0,d=0==o.ch;function f(){l+="\n",d=!0,++u}for(var h=0;h<a.length;++h){var m=new D.StringStream(a[h],c);while(!m.eol()){var g=D.innerMode(r,s),p=r.token(m,s),b=m.current();m.start=m.pos,d&&!/\S/.test(b)||(l+=b,d=!1),!d&&g.mode.newlineAfterToken&&g.mode.newlineAfterToken(p,b,m.string.slice(m.pos)||a[h+1]||"",g.state)&&f()}!m.pos&&r.blankLine&&r.blankLine(s),d||f()}t.operation((function(){t.replaceRange(l,o,i);for(var e=o.line+1,n=o.line+u;e<=n;++e)t.indentLine(e,"smart");t.setSelection(o,t.getCursor(!1))}))})),n.setOption("hintOptions",{schemaInfo:i}),console.log("editor?.text?.html"),console.log(null===n||void 0===n||null===(t=n.text)||void 0===t?void 0:t.html),n.setValue(this.editorDataHtml),this.editorData=this.editorDataHtml,this.editor=n,this.editor.refresh()},mountedCodeMirror:function(){var t=this;this.editorText=D.fromTextArea(this.$refs.mycode,{mode:{name:"javascript",globalVars:!0},indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoRefresh:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}}}),this.editorText.on("change",(function(e){t.code=e.getValue()}))},getEditorData:function(){var t=this.editor.txt.html();alert(t)},setEditorData:function(){this.editor.txt.html("e141411")},save:function(){var t=this.editor.txt.html(),e="editor_html";window.localStorage.setItem(e,t);var o=window.localStorage.getItem(e);console.log("editor_html"),console.log(o)}},beforeDestroy:function(){var t;console.log("this.editor"),console.log(this.editor),null===(t=this.editor)||void 0===t||t.destroy(),this.editor=null},computed:Object(r["a"])({},Object(v["c"])("app",["getWangEdiorFormulaData"]))},C=y,x=(o("df16"),o("e607")),w=Object(x["a"])(C,m,g,!1,null,"423317b1",null),k=w.exports,O=o("8a2b"),T={data:function(){return{editorDataConf:{data:null},outVisible:!1,editor:null,editorData:"",editorText:null,textarea:"",curCode:"#include<int></int>",cmOptions:{tabSize:4,styleActiveLine:!0,lineNumbers:!0,line:!0,mode:"text/x-mysql",extraKeys:{Ctrl:"autocomplete"},lineWrapping:!0,theme:"solarized light"}}},components:{codemirror:O["codemirror"],CodeMirrorPopUp:k},mounted:function(){var t=this,e=new d.a("#demo1"),o=(d.a.$,d.a.PanelMenu),n=d.a.Panel,i=function(t){Object(c["a"])(i,t);var o=Object(l["a"])(i);function i(t){Object(a["a"])(this,i);var e=d.a.$('<div class="w-e-menu">\n                    <i class="iconfont icongongshi" style="font-size:18px;"></i>\n                </div>');return o.call(this,e,t)}return Object(s["a"])(i,[{key:"clickHandler",value:function(){var t=Object(f["a"])(e),o=new n(this,t);o.create()}},{key:"tryChangeActive",value:function(){}}]),i}(o),r=function(t){Object(c["a"])(i,t);var o=Object(l["a"])(i);function i(t){Object(a["a"])(this,i);var e=d.a.$('<div class="w-e-menu">\n                    <i class="iconfont iconshouxieban" style="font-size:18px;"></i>\n                </div>');return o.call(this,e,t)}return Object(s["a"])(i,[{key:"clickHandler",value:function(){var t=Object(h["a"])(e),o=new n(this,t);o.create()}},{key:"tryChangeActive",value:function(){}}]),i}(o),u="kityformulaKey";e.menus.extend("kityformulaKey",i);var m="myscriptKey";e.menus.extend("myscriptKey",r),e.config.menus=e.config.menus.concat(u),e.config.menus=e.config.menus.concat(m),e.config.uploadImgShowBase64=!0,e.config.uploadImgMaxLength=5,e.zIndex.baseZIndex=100,e.config.onchange=function(e){console.log("newHtml"),console.log(e),t.editorDataConf.data=e,t.editorData=e},e.create(),console.log("this.editorDataHtml"),console.log(this.editorDataHtml),e.txt.html(this.editorDataHtml),this.editor=e},props:{editorDataHtml:null},methods:{openCodeMirrorPopUp:function(){var t=this;console.log("openCodeMirrorPopUp"),setTimeout((function(){t.$refs.CodeMirrorPopUp.autoFormatRangeAll()}),500)},updateData:function(){},saveMirrorToWang:function(t){console.log("data saveMirrorToWang"),console.log(t),this.editor.txt.html(t),this.outVisible=!1},see:function(){var t=this;console.log("this.editorData see"),console.log(this.editorData),console.log("this.editorDataConf"),console.log(this.editorDataConf),this.outVisible=!this.outVisible,this.$nextTick((function(){console.log("this.$refs.CodeMirrorPopUp"),console.log(t.$refs.CodeMirrorPopUp),console.log("this.$refs"),console.log(t.$refs),t.$refs.CodeMirrorPopUp.updateData(t.editorData)}))},onCmFocus:function(t){console.log("the editor is focused!",t),console.log("this.editor .config.focus"),console.log(this.editor.config.focus),this.editor.config.focus=!1,console.log("this.editor .config.focus"),console.log(this.editor.config.focus),console.log("document.activeElement"),console.log(document.activeElement),this.$nextTick((function(){t.refresh()}))},seeCode:function(){console.log("this.editorData"),console.log(this.editorData),b["a"].dispatch("app/setWangEdiorFormulaData",this.editorData),this.$router.push("/test/CodeMirrorTest")},outClose:function(){console.log("outClose"),this.outVisible=!1},getWangEdiorFormulaDataFromStore:function(){return console.log("this.$store.state"),console.log(this.$store.state),this.$store.state.app.WangEdiorFormulaData},codemirrorOnClick:function(t){},onGetVal:function(){this.$emit("getVal",this.editorData)},onSetVal:function(t){console.log("val"),console.log(t),this.editor.txt.html(t)},onClose:function(){this.$emit("close",this.editorData)},changes:function(t,e){var o=t.getValue();console.log("editorValue"),console.log(o),this.editor.txt.html(o)},onCmCodeChanges:function(t,e){this.editorValue=t.getValue(),this.resetLint()},mountedCodeMirror:function(){var t=this;this.editorText=CodeMirror.fromTextArea(this.$refs.mycode,{mode:{name:"javascript",globalVars:!0},indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autoRefresh:!0,extraKeys:{Ctrl:"autocomplete"},hintOptions:{tables:{users:["name","score","birthDate"],countries:["name","population","size"]}}}),this.editorText.on("change",(function(e){t.code=e.getValue()}))},getEditorData:function(){var t=this.editor.txt.html();alert(t)},setEditorData:function(){this.editor.txt.html("e141411")},save:function(){var t=this.editor.txt.html(),e="editor_html";window.localStorage.setItem(e,t);var o=window.localStorage.getItem(e);console.log("editor_html"),console.log(o)}},beforeDestroy:function(){this.editor.destroy(),this.editor=null},computed:Object(r["a"])({},Object(v["c"])("app",["getWangEdiorFormulaData"]))},R=T,S=(o("2593"),Object(x["a"])(R,n,i,!1,null,"1b9476ca",null));e["default"]=S.exports},a12b:function(t,e,o){},b7c4:function(t,e,o){},bd8c:function(t,e,o){var n=o("201c"),i=o("9adb"),r=o("a4b4");n({global:!0},{Reflect:{}}),r(i.Reflect,"Reflect",!0)},bdb5:function(t,e,o){"use strict";o.d(e,"a",(function(){return n}));o("e5a1");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},df16:function(t,e,o){"use strict";o("6fe6")}}]);